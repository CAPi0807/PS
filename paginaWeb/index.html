<html lang="es">

<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="This is an HTML5 example">
    <meta name="keywords" content="HTML5, CSS3, JavaScript">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script src="/PS/paginaWeb/xlu-include-file.js"></script>
    <script src="/PS/API/main.js"></script>

    <link href="style.css" rel="stylesheet">
    <title>Calculator</title>

</head>
<body>
    <header xlu-include-file="/PS/paginaWeb/header/header.html">

    </header>
    <main xlu-include-file="/PS/paginaWeb/main_calculadora.html">

    </main>
    <footer>
        <p>Designed by: PS-Group 7</p>
    </footer>

    <script>

        function appendToConsole(value) {
            document.getElementById('console').innerText += value;
        }

        xLuIncludeFile();

        function cambiarIdioma() {
                         // Cambiar el atributo lang de la etiqueta html
        //location.reload();
            var lan = document.getElementById("lan");
            var inputLang;
            var outputLang;
            if(lan.value==="es"){
                inputLang="es";
                lan.value = "en";
                lan.innerText = "en";
                outputLang="en";
                lan.style.backgroundImage = `url("https://upload.wikimedia.org/wikipedia/commons/a/a5/Flag_of_the_United_Kingdom_%281-2%29.svg")`;
            }
            else if (lan.value==="en"){

                location.reload();
            }
            document.documentElement.lang = lan.innerText;

            console.log(lan.value);
            //var inputText = document.getElementById("button1");
            var texto=document.getElementById("button1").title;
            for(var i=2;i<7;i++) {
                //console.log(document.getElementById("button"+i).title);
                texto+=", "+document.getElementById("button"+i).title;
            }

            //inputText = document.getElementById("button1");
            console.log(texto);
            var arrayLan;
            fetch(
                "https://api.mymemory.translated.net/get?q=" + texto + "&langpair=" + inputLang + "|" + outputLang
            ).then((response) => response.json())

                .then((data) => {
                    var variable = data.responseData.translatedText;
                    console.log(variable);
                    /*inputText.title = variable;
                    inputText.innerText = variable;
                    console.log(inputText);*/
                    arrayLan = variable.split(", ");
                    console.log(arrayLan);
                    var j=1;
                    arrayLan.forEach(function(elemento) {
                        document.getElementById("button"+j).innerText=elemento;
                        document.getElementById("button"+j).title=elemento;
                        j++;
                    });

                });


        }

    </script>
</body>
</html>